//
//  main.c
//  DS4Communicator
//
//  Created by Connor Cumming on 10/24/17.
//  Copyright Â© 2017 Connor Cumming. All rights reserved.
//

#include <stdio.h>
#include <stdlib.h>
#include "hidapi.h"

#define MAX_STR 255
#define PRODUCT_ID 0x05C4
#define VENDOR_ID 0x054C

int main(int argc, char* argv[]) {
    int res;
    unsigned char buf[467];
    
    hid_init();
    hid_device *DS4Controller = hid_open(0x054C, 0x05C4, NULL);
    
    // Input Report
    //res = hid_read(DS4Controller, buf, 65);
    //printf("Report: %s\n", buf);
    
    // Output Report (red led)
    unsigned char newbuf[] = { 0x11, 0xc0, 0x20, 0xf3, 0x04, 0x00, 0x00, 0x00, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x43, 0x43, 0x00, 0x4d, 0x85, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xf6, 0xbe, 0xae, 0x2f };
    
    
    res = hid_write(DS4Controller, newbuf, 78);
    printf("Result: %d\n", res);
    return 0;
}




